<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Password Validation Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .test-section {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ccc;
      }
      .success {
        color: green;
      }
      .error {
        color: red;
      }
      input {
        margin: 5px;
        padding: 5px;
      }
      button {
        margin: 5px;
        padding: 5px 10px;
      }
    </style>
  </head>
  <body>
    <h1>Password Validation Test</h1>

    <div class="test-section">
      <h3>Password Strength Test</h3>
      <input type="password" id="test-password" placeholder="Enter password" />
      <div id="strength-result"></div>
    </div>

    <div class="test-section">
      <h3>Password Match Test</h3>
      <input type="password" id="test-password1" placeholder="Password" />
      <input
        type="password"
        id="test-password2"
        placeholder="Confirm Password"
      />
      <div id="match-result"></div>
    </div>

    <div class="test-section">
      <h3>Generate Password Test</h3>
      <button onclick="generateTestPassword()">Generate Password</button>
      <div id="generated-password"></div>
    </div>

    <script>
      // Password validation logic from our implementation
      function validatePassword(password) {
        let strength = 0;
        let message = "";
        let color = "";

        if (password.length >= 8) strength++;
        if (/[A-Z]/.test(password)) strength++;
        if (/[a-z]/.test(password)) strength++;
        if (/\d/.test(password)) strength++;
        if (/[!@#$%^&*]/.test(password)) strength++;

        switch (strength) {
          case 0:
          case 1:
            message = "Very Weak";
            color = "error";
            break;
          case 2:
            message = "Weak";
            color = "error";
            break;
          case 3:
            message = "Fair";
            color = "error";
            break;
          case 4:
            message = "Good";
            color = "success";
            break;
          case 5:
            message = "Strong";
            color = "success";
            break;
        }

        return { message, color };
      }

      function checkPasswordMatch(password1, password2) {
        if (password2 === "") return { message: "", color: "" };

        if (password1 === password2) {
          return { message: "Passwords match", color: "success" };
        } else {
          return { message: "Passwords do not match", color: "error" };
        }
      }

      function generateSecurePassword() {
        const uppercase = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        const lowercase = "abcdefghijklmnopqrstuvwxyz";
        const numbers = "0123456789";
        const symbols = "!@#$%^&*";

        let password = "";

        // Ensure at least one character from each set
        password += uppercase[Math.floor(Math.random() * uppercase.length)];
        password += lowercase[Math.floor(Math.random() * lowercase.length)];
        password += numbers[Math.floor(Math.random() * numbers.length)];
        password += symbols[Math.floor(Math.random() * symbols.length)];

        // Fill the rest with random characters
        const allChars = uppercase + lowercase + numbers + symbols;
        for (let i = 4; i < 12; i++) {
          password += allChars[Math.floor(Math.random() * allChars.length)];
        }

        // Shuffle the password
        password = password
          .split("")
          .sort(() => Math.random() - 0.5)
          .join("");

        return password;
      }

      // Event listeners
      document
        .getElementById("test-password")
        .addEventListener("input", function (e) {
          const result = validatePassword(e.target.value);
          const resultDiv = document.getElementById("strength-result");
          resultDiv.textContent = `Strength: ${result.message}`;
          resultDiv.className = result.color;
        });

      document
        .getElementById("test-password2")
        .addEventListener("input", function (e) {
          const password1 = document.getElementById("test-password1").value;
          const password2 = e.target.value;
          const result = checkPasswordMatch(password1, password2);
          const resultDiv = document.getElementById("match-result");
          resultDiv.textContent = result.message;
          resultDiv.className = result.color;
        });

      function generateTestPassword() {
        const password = generateSecurePassword();
        const resultDiv = document.getElementById("generated-password");
        resultDiv.innerHTML = `
                <strong>Generated Password:</strong> ${password}<br>
                <strong>Strength:</strong> ${validatePassword(password).message}
            `;
      }
    </script>
  </body>
</html>
